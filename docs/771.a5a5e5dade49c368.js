"use strict";(self.webpackChunktest_movies=self.webpackChunktest_movies||[]).push([[771],{8771:(pt,S,s)=>{s.r(S),s.d(S,{DashboardModule:()=>mt});var f=s(6895),M=s(9299),t=s(4650),C=s(2788),I=s(3636),w=s(7974),O=s(1281),p=s(3238),x=s(7579);s(7340);const Z=new t.OlP("MAT_SORT_DEFAULT_OPTIONS"),R=(0,p.dB)((0,p.Id)(class{}));let H=(()=>{class i extends R{constructor(e){super(),this._defaultOptions=e,this.sortables=new Map,this._stateChanges=new x.x,this.start="asc",this._direction="",this.sortChange=new t.vpe}get direction(){return this._direction}set direction(e){this._direction=e}get disableClear(){return this._disableClear}set disableClear(e){this._disableClear=(0,O.Ig)(e)}register(e){this.sortables.set(e.id,e)}deregister(e){this.sortables.delete(e.id)}sort(e){this.active!=e.id?(this.active=e.id,this.direction=e.start?e.start:this.start):this.direction=this.getNextSortDirection(e),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(e){if(!e)return"";let n=function N(i,a){let e=["asc","desc"];return"desc"==i&&e.reverse(),a||e.push(""),e}(e.start||this.start,e?.disableClear??this.disableClear??!!this._defaultOptions?.disableClear),c=n.indexOf(this.direction)+1;return c>=n.length&&(c=0),n[c]}ngOnInit(){this._markInitialized()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z,8))},i.\u0275dir=t.lG2({type:i,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{disabled:["matSortDisabled","disabled"],active:["matSortActive","active"],start:["matSortStart","start"],direction:["matSortDirection","direction"],disableClear:["matSortDisableClear","disableClear"]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[t.qOj,t.TTD]}),i})();var d=s(3626),l=s(4006),_=s(5412),v=s(262),P=s(2843),E=s(9019),U=s(529);let b=(()=>{class i{constructor(e){this._HttpClient=e,this.domain=E.N.domain}createMovie(e){return this._HttpClient.post(`${this.domain}/api/movies`,e).pipe((0,v.K)(this.handleError))}updateMovie(e,r){return this._HttpClient.post(`${this.domain}/api/movies/${r}`,e).pipe((0,v.K)(this.handleError))}deleteMovie(e){return this._HttpClient.post(`${this.domain}/api/movies/${e}`,{_method:"delete"}).pipe((0,v.K)(this.handleError))}handleError(e){return e.error instanceof ErrorEvent?console.error("An error occurred:",e.error.message):console.error(`Backend returned code ${e.status}, body was: ${e.error}`),(0,P._)(()=>e.error.message)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(U.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var D=s(7185),u=s(9549),y=s(4144),F=s(1572),Y=s(4385);function k(i,a){if(1&i&&t._UZ(0,"img",19),2&i){const e=t.oxw();t.Q6J("src",e.imageSrc,t.LSH)}}function j(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"mat-option",20),t._uU(2),t.qZA(),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function V(i,a){1&i&&t._UZ(0,"mat-spinner")}let A=(()=>{class i{constructor(e,r,n,c,m,T){this.formBuilder=e,this.dialogRef=r,this.data=n,this._MoviesService=c,this._MovieService=m,this.toastr=T,this.imageSrc="assets/images/movie-add.webp",this.listCategory=[],this.loading=!1,this.createForm=this.formBuilder.group({image:[null,[l.kI.required]],name:[null,[l.kI.required]],description:[null,[l.kI.required]],category_id:[null,[l.kI.required]]})}ngOnInit(){this.data?.item&&(this.imageSrc=`https://test-api.storexweb.com/${this.data.item.image}`,this.createForm.patchValue({image:this.data.item.image,name:this.data.item.name,description:this.data.item.description,category_id:this.data.item.category_id})),this.getListCategoy()}getListCategoy(){this._MovieService.listCategory().subscribe({next:e=>{this.listCategory=e.message}})}onFileChange(e){const r=new FileReader;if(e.target.files&&e.target.files.length){const[n]=e.target.files;r.readAsDataURL(n),r.onload=()=>{this.imageSrc=r.result,this.createForm.patchValue({image:e.target.files[0]})}}}onSubmit(){if(this.loading=!0,!this.createForm.valid)return;const e=new FormData;e.append("image",this.createForm.value.image),e.append("name",this.createForm.value.name),e.append("description",this.createForm.value.description),e.append("category_id",this.createForm.value.category_id),"create"==this.data.type?this._MoviesService.createMovie(e).subscribe({next:r=>{this.loading=!1,this.dialogRef.close("done"),"success"==r.status?this.toastr.success("update is successfully",r.status):this.toastr.warning("update is faild",r.status)},error:r=>{this.loading=!1}}):(e.append("_method","put"),this._MoviesService.updateMovie(e,this.data.item.id).subscribe({next:r=>{this.loading=!1,this.dialogRef.close("done"),"success"==r.status?this.toastr.success("update is successfully",r.status):this.toastr.warning("update is faild",r.status)},error:r=>{this.loading=!1}}))}close(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(_.so),t.Y36(_.WI),t.Y36(b),t.Y36(C.u),t.Y36(D._W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-update"]],decls:33,vars:6,consts:[[1,"reviews","position-relative"],[1,"close","mat-button",3,"click"],[3,"formGroup","submit"],[1,"image","mb-2"],[1,"position-relative"],[1,"hover-img"],["style","height: 200px; max-width:250px",3,"src",4,"ngIf"],["id","file","type","file","accept","image/*",1,"form-control","form-image",3,"change"],[1,"mb-2"],["appearance","outline",1,"w-100"],["matInput","","type","text","formControlName","name","id","name","placeholder","Name movie","placeholder","Placeholder"],["matInput","","autosize","","id","description","formControlName","description","rows","3",1,"my-textarea"],["appearance","outline"],["formControlName","category_id"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],["type","submit",1,"book","my-3","d-flex","align-items-center","justify-content-center",3,"disabled"],[1,"mx-2"],[4,"ngIf"],[2,"height","200px","max-width","250px",3,"src"],[3,"value"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return r.close()}),t._uU(2,"X"),t.qZA(),t.TgZ(3,"form",2),t.NdJ("submit",function(){return r.onSubmit()}),t.TgZ(4,"div",3)(5,"figure",4)(6,"div",5)(7,"p"),t._uU(8,"+"),t.qZA()(),t.YNc(9,k,1,1,"img",6),t.TgZ(10,"input",7),t.NdJ("change",function(c){return r.onFileChange(c)}),t.qZA()()(),t.TgZ(11,"div",8)(12,"mat-form-field",9)(13,"mat-label"),t._uU(14,"Name"),t.qZA(),t._UZ(15,"input",10),t.qZA()(),t.TgZ(16,"div",8)(17,"mat-form-field",9)(18,"mat-label"),t._uU(19,"Description"),t.qZA(),t.TgZ(20,"textarea",11),t._uU(21," "),t.qZA()()(),t.TgZ(22,"div",8)(23,"mat-form-field",12)(24,"mat-label"),t._uU(25,"Category"),t.qZA(),t.TgZ(26,"mat-select",13),t.YNc(27,j,3,2,"ng-container",14),t.qZA()()(),t.TgZ(28,"div",15)(29,"button",16)(30,"span",17),t._uU(31),t.qZA(),t.YNc(32,V,1,0,"mat-spinner",18),t.qZA()()()()),2&e&&(t.xp6(3),t.Q6J("formGroup",r.createForm),t.xp6(6),t.Q6J("ngIf",r.imageSrc),t.xp6(18),t.Q6J("ngForOf",r.listCategory),t.xp6(2),t.Q6J("disabled",r.createForm.invalid),t.xp6(2),t.Oqu(r.data.type),t.xp6(1),t.Q6J("ngIf",r.loading))},dependencies:[f.sg,f.O5,u.KE,u.hX,y.Nt,F.Ou,Y.gD,p.ey,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u],styles:[".reviews[_ngcontent-%COMP%]{min-width:500px}.blue[_ngcontent-%COMP%]{background-color:#161d4c}.orangered[_ngcontent-%COMP%]{background-color:#ff4500}.close.mat-button[_ngcontent-%COMP%]{position:absolute;top:-17px;right:-18px;padding:5px;line-height:14px;min-width:30px;border:1px solid;font-size:21px;font-weight:700;color:#000!important}.close.mat-button[_ngcontent-%COMP%]:hover{background-color:#e0e6eb}.book[_ngcontent-%COMP%]{background:radial-gradient(26.76% 85.52% at 86.73% -12.86%,#c241ff 6.65%,#6b57ff 100%);font-weight:bolder!important;color:#fff;border-radius:8px;border:none;font-size:25px;font-weight:bolder;width:180px;height:50px}figure[_ngcontent-%COMP%]{width:max-content;position:relative}figure[_ngcontent-%COMP%]   .form-image[_ngcontent-%COMP%], .hover-img[_ngcontent-%COMP%]{transition:.3s all;position:absolute;top:0;right:0;height:100%;width:100%;opacity:0}figure[_ngcontent-%COMP%]   .hover-img[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}figure[_ngcontent-%COMP%]   .hover-img[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{border:#fff solid 1px;border-radius:50%;color:#fff;width:30px;height:30px;display:flex;align-items:center;justify-content:center;padding:0;margin:0;font-size:40px;font-weight:600}figure[_ngcontent-%COMP%]:hover   .hover-img[_ngcontent-%COMP%]{opacity:.9;background:radial-gradient(26.76% 85.52% at 86.73% -12.86%,#c241ff 6.65%,#6b57ff 100%)}[_nghost-%COMP%]     .mat-progress-spinner svg{width:25px!important;height:auto!important}.mat-spinner[_ngcontent-%COMP%]{width:30px!important;height:30px!important}"]}),i})();var $=s(4859),J=s(7392);function Q(i,a){1&i&&(t.TgZ(0,"th",22),t._uU(1," ID "),t.qZA())}function q(i,a){if(1&i&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function L(i,a){1&i&&(t.TgZ(0,"th",22),t._uU(1," Image "),t.qZA())}function z(i,a){if(1&i&&(t.TgZ(0,"td",23),t._UZ(1,"img",24),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("src","https://test-api.storexweb.com/"+e.image,t.LSH)}}function X(i,a){1&i&&(t.TgZ(0,"th",22),t._uU(1," Name "),t.qZA())}function G(i,a){if(1&i&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function K(i,a){1&i&&(t.TgZ(0,"th",22),t._uU(1," Description "),t.qZA())}function W(i,a){if(1&i&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.description," ")}}function tt(i,a){1&i&&(t.TgZ(0,"th",22),t._uU(1," edit "),t.qZA())}function et(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",23)(1,"button",25),t.NdJ("click",function(){const c=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.openEditDialog("edit",c))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()()}}function it(i,a){1&i&&(t.TgZ(0,"th",22),t._uU(1," delete "),t.qZA())}function ot(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",23)(1,"button",26),t.NdJ("click",function(){const c=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.deleteMovie(c.id))}),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()()}}function rt(i,a){1&i&&t._UZ(0,"tr",27)}function at(i,a){1&i&&t._UZ(0,"tr",28)}function nt(i,a){if(1&i&&(t.TgZ(0,"tr",29)(1,"td",30),t._uU(2),t.qZA()()),2&i){t.oxw();const e=t.MAs(13);t.xp6(2),t.hij('No data matching the filter "',e.value,'"')}}const st=function(){return[5,10,25,100]};let ct=(()=>{class i{constructor(e,r,n){this._MatDialog=e,this._MoviesService=r,this.toastr=n,this.reloadMethod=new t.vpe,this.displayedColumns=["id","Image","Name","Description","edit","delete"]}ngOnInit(){}ngOnChanges(e){setTimeout(()=>{this.dataSource=new d.by(this.listMovies),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}openCreateDialog(e){this._MatDialog.open(A,{data:{type:e}}).afterClosed().subscribe(n=>{n&&this.reloadMethod.emit()})}openEditDialog(e,r){this._MatDialog.open(A,{data:{type:e,item:r}}).afterClosed().subscribe(c=>{c&&this.reloadMethod.emit()})}deleteMovie(e){this._MoviesService.deleteMovie(e).subscribe({next:r=>{this.reloadMethod.emit(),this.toastr.error("Delete is successfully","success")},error:r=>{}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(_.uw),t.Y36(b),t.Y36(D._W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-movies"]],viewQuery:function(e,r){if(1&e&&(t.Gf(w.NW,5),t.Gf(H,5)),2&e){let n;t.iGM(n=t.CRH())&&(r.paginator=n.first),t.iGM(n=t.CRH())&&(r.sort=n.first)}},inputs:{listMovies:"listMovies",loading:"loading"},outputs:{reloadMethod:"reloadMethod"},features:[t.TTD],decls:42,vars:6,consts:[[1,"w-100","text-center","header","my-5"],[2,"color","#fff"],[1,"d-flex","align-items-center"],["appearance","standard",2,"max-width","100%"],["matInput","","placeholder","Ex. Mia",3,"keyup"],["input",""],["mat-mini-fab","","aria-label","Example icon shopping_cart","color","accent",1,"mx-3",3,"click"],[2,"overflow","auto"],[1,"mat-elevation-z8",2,"min-width","600px"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Image"],["matColumnDef","Name"],["matColumnDef","Description"],["matColumnDef","edit"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of listMovies",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["alt","",3,"src"],["mat-icon-button","","aria-label","Example icon edit","color","primary",3,"click"],["mat-icon-button","","aria-label","Example icon delete","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"All Movies"),t.qZA(),t.TgZ(3,"p",1),t._uU(4,"you have "),t.TgZ(5,"strong"),t._uU(6),t.qZA(),t._uU(7," Movies"),t.qZA()(),t.TgZ(8,"div",2)(9,"mat-form-field",3)(10,"mat-label"),t._uU(11,"Filter"),t.qZA(),t.TgZ(12,"input",4,5),t.NdJ("keyup",function(c){return r.applyFilter(c)}),t.qZA()(),t.TgZ(14,"button",6),t.NdJ("click",function(){return r.openCreateDialog("create")}),t.TgZ(15,"mat-icon"),t._uU(16,"add"),t.qZA()()(),t.TgZ(17,"div",7)(18,"div",8)(19,"table",9),t.ynx(20,10),t.YNc(21,Q,2,0,"th",11),t.YNc(22,q,2,1,"td",12),t.BQk(),t.ynx(23,13),t.YNc(24,L,2,0,"th",11),t.YNc(25,z,2,1,"td",12),t.BQk(),t.ynx(26,14),t.YNc(27,X,2,0,"th",11),t.YNc(28,G,2,1,"td",12),t.BQk(),t.ynx(29,15),t.YNc(30,K,2,0,"th",11),t.YNc(31,W,2,1,"td",12),t.BQk(),t.ynx(32,16),t.YNc(33,tt,2,0,"th",11),t.YNc(34,et,4,0,"td",12),t.BQk(),t.ynx(35,17),t.YNc(36,it,2,0,"th",11),t.YNc(37,ot,4,0,"td",12),t.BQk(),t.YNc(38,rt,1,0,"tr",18),t.YNc(39,at,1,0,"tr",19),t.YNc(40,nt,3,1,"tr",20),t.qZA(),t._UZ(41,"mat-paginator",21),t.qZA()()),2&e&&(t.xp6(6),t.Oqu(r.listMovies.length),t.xp6(13),t.Q6J("dataSource",r.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(5,st)))},dependencies:[u.KE,u.hX,y.Nt,$.lW,J.Hw,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,d.Ee,w.NW],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{min-width:max-content;width:24%}th[_ngcontent-%COMP%]{font-size:20px;font-weight:800}img[_ngcontent-%COMP%]{width:120px;max-height:120px;margin:10px 0}"]}),i})();const dt=[{path:"",component:(()=>{class i{constructor(e,r){this._MovieService=e,this._AuthService=r,this.listMovies=[],this.loading=!1,this.getListMovies()}ngOnInit(){this._AuthService.isLoading.subscribe(e=>{this.loading=e})}getListMovies(){this._MovieService.listMovies().subscribe({next:e=>{this.listMovies=e.message}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(C.u),t.Y36(I.e))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-index"]],decls:2,vars:1,consts:[[1,"container","page"],[3,"listMovies","reloadMethod"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"app-create-movies",1),t.NdJ("reloadMethod",function(){return r.getListMovies()}),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("listMovies",r.listMovies))},dependencies:[ct]}),i})()}];let lt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[M.Bz.forChild(dt),M.Bz]}),i})();var ht=s(1793);let mt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[f.ez,lt,ht.I,l.UX]}),i})()}}]);